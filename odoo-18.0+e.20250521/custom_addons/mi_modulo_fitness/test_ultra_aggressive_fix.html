<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Ultra Aggressive Fix - Fitness Module</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f8f9fa;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .viewport-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #007bff;
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 9999;
        }
        .problem-zone {
            background: #ffebee;
            border: 2px solid #f44336;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .safe-zone {
            background: #e8f5e8;
            border: 2px solid #4caf50;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .test-button:hover {
            background: #0056b3;
        }
        .console-output {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin: 10px 0;
        }
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .step {
            margin: 10px 0;
            padding: 10px;
            background: #f8f9fa;
            border-left: 4px solid #007bff;
        }
    </style>
</head>
<body>
    <div class="viewport-info" id="viewportInfo">
        Viewport: <span id="viewportSize">0x0</span>px
        <br>Estado: <span id="zoneStatus">Calculando...</span>
    </div>

    <div class="test-container">
        <h1>üîß Test Ultra Aggressive Fix - Fitness Module v4.0</h1>
        
        <div class="instructions">
            <h3>üìã Instrucciones de Prueba</h3>
            <p><strong>Problema:</strong> Los elementos del formulario desaparecen cuando el viewport es ‚â• 1534px</p>
            <p><strong>Soluci√≥n:</strong> CSS y JavaScript ultra agresivos para forzar visibilidad</p>
        </div>

        <div id="zoneIndicator" class="safe-zone">
            <h3>‚úÖ Zona Segura (< 1534px)</h3>
            <p>El contenido deber√≠a ser visible normalmente</p>
        </div>

        <div class="step">
            <h4>Paso 1: Verificar Estado Actual</h4>
            <button class="test-button" onclick="checkCurrentState()">üîç Verificar Estado</button>
            <button class="test-button" onclick="openFormulario()">üìù Abrir Formulario</button>
        </div>

        <div class="step">
            <h4>Paso 2: Cambiar Tama√±o de Ventana</h4>
            <p>Cambia el ancho de la ventana para probar:</p>
            <button class="test-button" onclick="simulateWidth(1400)">üì± 1400px (Seguro)</button>
            <button class="test-button" onclick="simulateWidth(1534)">‚ö†Ô∏è 1534px (L√≠mite)</button>
            <button class="test-button" onclick="simulateWidth(1600)">üö® 1600px (Problem√°tico)</button>
            <button class="test-button" onclick="simulateWidth(1800)">üí• 1800px (Muy Problem√°tico)</button>
        </div>

        <div class="step">
            <h4>Paso 3: Funciones de Debug</h4>
            <button class="test-button" onclick="runDebugReport()">üìä Reporte Completo</button>
            <button class="test-button" onclick="runUltraRepair()">üîß Reparaci√≥n Ultra Agresiva</button>
            <button class="test-button" onclick="toggleDebug()">üéõÔ∏è Toggle Debug</button>
        </div>

        <div class="step">
            <h4>Paso 4: Monitoreo en Tiempo Real</h4>
            <button class="test-button" onclick="startMonitoring()">‚ñ∂Ô∏è Iniciar Monitoreo</button>
            <button class="test-button" onclick="stopMonitoring()">‚èπÔ∏è Detener Monitoreo</button>
            <button class="test-button" onclick="clearConsole()">üóëÔ∏è Limpiar Consola</button>
        </div>

        <div class="console-output" id="consoleOutput">
            <div>üöÄ Consola de Debug - Fitness Module v4.0</div>
            <div>Esperando comandos...</div>
        </div>

        <div class="instructions">
            <h3>üéØ Qu√© Buscar</h3>
            <ul>
                <li><strong>En zona segura (< 1534px):</strong> Todo visible normalmente</li>
                <li><strong>En zona problem√°tica (‚â• 1534px):</strong> 
                    <ul>
                        <li>Bordes de colores deben aparecer (rojo, azul, verde, naranja)</li>
                        <li>Los elementos deben mantenerse visibles</li>
                        <li>El JavaScript debe detectar y reparar autom√°ticamente</li>
                    </ul>
                </li>
                <li><strong>En consola del navegador:</strong> Logs detallados del debug</li>
            </ul>
        </div>

        <div class="instructions">
            <h3>üîó Enlaces Directos</h3>
            <p><a href="http://localhost:8069/odoo/action-685/new" target="_blank">üìù Formulario de Inscripci√≥n (Nuevo)</a></p>
            <p><a href="http://localhost:8069/web/login" target="_blank">üîê Login Odoo</a></p>
            <p><strong>Base de datos:</strong> odoo_test</p>
        </div>
    </div>

    <script>
        let monitoringInterval = null;
        
        function updateViewportInfo() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const isProblematic = width >= 1534;
            
            document.getElementById('viewportSize').textContent = `${width}x${height}`;
            document.getElementById('zoneStatus').textContent = isProblematic ? 'PROBLEM√ÅTICA' : 'SEGURA';
            
            const indicator = document.getElementById('zoneIndicator');
            if (isProblematic) {
                indicator.className = 'problem-zone';
                indicator.innerHTML = `
                    <h3>üö® Zona Problem√°tica (‚â• 1534px)</h3>
                    <p>Ancho actual: ${width}px - Los elementos pueden desaparecer</p>
                    <p><strong>Soluci√≥n activa:</strong> CSS y JS ultra agresivos aplicados</p>
                `;
            } else {
                indicator.className = 'safe-zone';
                indicator.innerHTML = `
                    <h3>‚úÖ Zona Segura (< 1534px)</h3>
                    <p>Ancho actual: ${width}px - El contenido deber√≠a ser visible normalmente</p>
                `;
            }
        }
        
        function logToConsole(message) {
            const console = document.getElementById('consoleOutput');
            const timestamp = new Date().toLocaleTimeString();
            console.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            console.scrollTop = console.scrollHeight;
        }
        
        function checkCurrentState() {
            logToConsole('üîç Verificando estado actual...');
            logToConsole(`üìê Viewport: ${window.innerWidth}x${window.innerHeight}px`);
            logToConsole(`‚ö†Ô∏è Zona problem√°tica: ${window.innerWidth >= 1534 ? 'S√ç' : 'NO'}`);
            
            // Verificar si las funciones de debug est√°n disponibles
            if (typeof window.fitnessDebugReport === 'function') {
                logToConsole('‚úÖ Funciones de debug disponibles');
                logToConsole('üìä Ejecutando reporte autom√°tico...');
                window.fitnessDebugReport();
            } else {
                logToConsole('‚ùå Funciones de debug NO disponibles');
                logToConsole('üí° Aseg√∫rate de estar en una p√°gina de Odoo con el m√≥dulo cargado');
            }
        }
        
        function openFormulario() {
            logToConsole('üìù Abriendo formulario de inscripci√≥n...');
            window.open('http://localhost:8069/odoo/action-685/new', '_blank');
        }
        
        function simulateWidth(width) {
            logToConsole(`üì± Simulando ancho de ${width}px...`);
            logToConsole('üí° Nota: Cambia manualmente el tama√±o de la ventana para probar');
            logToConsole(`üéØ Objetivo: Llevar la ventana a ${width}px de ancho`);
        }
        
        function runDebugReport() {
            logToConsole('üìä Ejecutando reporte de debug...');
            if (typeof window.fitnessDebugReport === 'function') {
                window.fitnessDebugReport();
                logToConsole('‚úÖ Reporte ejecutado - Ver consola del navegador');
            } else {
                logToConsole('‚ùå Funci√≥n no disponible - Abrir formulario de Odoo primero');
            }
        }
        
        function runUltraRepair() {
            logToConsole('üîß Ejecutando reparaci√≥n ultra agresiva...');
            if (typeof window.ultraAggressiveRepair === 'function') {
                const repaired = window.ultraAggressiveRepair();
                logToConsole(`‚úÖ Reparaci√≥n completada: ${repaired} elementos reparados`);
            } else {
                logToConsole('‚ùå Funci√≥n no disponible - Abrir formulario de Odoo primero');
            }
        }
        
        function toggleDebug() {
            logToConsole('üéõÔ∏è Alternando debug...');
            if (typeof window.fitnessDebugToggle === 'function') {
                const active = window.fitnessDebugToggle();
                logToConsole(`üîß Debug ${active ? 'ACTIVADO' : 'DESACTIVADO'}`);
            } else {
                logToConsole('‚ùå Funci√≥n no disponible - Abrir formulario de Odoo primero');
            }
        }
        
        function startMonitoring() {
            if (monitoringInterval) {
                logToConsole('‚ö†Ô∏è Monitoreo ya est√° activo');
                return;
            }
            
            logToConsole('‚ñ∂Ô∏è Iniciando monitoreo en tiempo real...');
            monitoringInterval = setInterval(() => {
                updateViewportInfo();
                if (window.innerWidth >= 1534) {
                    logToConsole(`üö® Zona problem√°tica detectada: ${window.innerWidth}px`);
                }
            }, 1000);
        }
        
        function stopMonitoring() {
            if (monitoringInterval) {
                clearInterval(monitoringInterval);
                monitoringInterval = null;
                logToConsole('‚èπÔ∏è Monitoreo detenido');
            } else {
                logToConsole('‚ö†Ô∏è No hay monitoreo activo');
            }
        }
        
        function clearConsole() {
            document.getElementById('consoleOutput').innerHTML = `
                <div>üöÄ Consola de Debug - Fitness Module v4.0</div>
                <div>Consola limpiada...</div>
            `;
        }
        
        // Inicializaci√≥n
        window.addEventListener('resize', updateViewportInfo);
        updateViewportInfo();
        
        // Log inicial
        logToConsole('üöÄ Test Ultra Aggressive Fix inicializado');
        logToConsole('üìã Sigue las instrucciones paso a paso');
        logToConsole('üîó Abre el formulario de Odoo para probar las funciones');
    </script>
</body>
</html> 